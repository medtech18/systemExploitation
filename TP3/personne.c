#include<stdlib.h>
#include<stdio.h>
#include<string.h>
typedef struct Personne
{
    /* data */
    char * nom ;
    int age ;
} Personne;

int calcul_max(int taille);
Personne * saisie_personne_suivante();

int main(int n , char** argv)
{
    
    Personne *b ;
    if(n > 0)
    {
        int param = atoi(argv[1]);
  /*      b = (Personne*)malloc(sizeof(Personne)*param);

        for (int i = 0; i < param; i++)
        {
            b[i].age = i ;
            b[i].nom = "test" ;
        }

        for (int i = 0; i < param; i++)
        {
            printf("Nom %s  %d \n",b[i].nom,b[i].age);
        }*/

        printf("l'indice de dernier %d \n " , calcul_max(param));
    } 
    

   // Personne *A = saisie_personne_suivante();
   // printf("Nom %s  %d \n",A->nom,A->age);

    return 0;
}


Personne * saisie_personne_suivante()
{   
        Personne *p = (Personne *)malloc(sizeof(Personne));

        char name[40];        
        
        do
        {
            printf("Saisir le age : \n");
            scanf("%d",&(p->age));

            if(p->age < 0)
            {
                printf("Attention, saisir un entier positif : %d \n ",abs(p->age));
            }
            else
            {
                printf("Saisir le nom : \n");
                scanf("%s",name);
                p->nom = name;
                //strcpy(p->nom,name);
            }
            
        }while (p->age < 0);

    return p;
}

int calcul_max(int taille)
{
    Personne* b[taille] ;
    int age = 0 ;
    int indice = 0;

        for(int i = 0; i < taille; i++)
        {
            
            b[i] = saisie_personne_suivante();   
            if (b[i]->age > age) 
            {
                age = b[i]->age ;
                indice = i ;
            }     
        }
        //for (int i = 0; i < taille; i++)
        //{
        //    printf("Nom %s  %d \n",b[i]->nom,b[i]->age);
        //}

        return indice;
}

